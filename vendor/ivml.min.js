/*! ivml 27-08-2014 */
function cleanEscape(a){return a.replace(/</,"&lt;").replace(/>/,"&gt;")}var ivml=ivml||{};angular.module("ivml",["ivml.chart"]),ivml.isF=function(a){return"function"==typeof a},ivml.animation={duration:250},ivml.textCalculation={},ivml.limits={ticks:100},ivml.clampIntegerToTicks=function(a){if(isNaN(parseInt(a)))return 0;var b=parseInt(a);return 0>b?b=0:b>ivml.limits.ticks&&(b=ivml.limits.ticks),b},ivml.getTextWidthInPixels=function(a,b,c){return ivml.textCalculation.textCheckElement||(ivml.textCalculation.textCheckElement=d3.select(document.body).append("svg").attr("height",0).attr("width",0).style("visibility","hidden").append("g").append("text")),ivml.textCalculation.textCheckElement.style("font-family",b).style("font-size",c).text(a),ivml.textCalculation.textCheckElement.node().getComputedTextLength()},ivml.escapeNoNull=function(a){return null!=a?escape(a):null},ivml.animateSelection=function(a){return ivml.animation.duration&&ivml.animation.duration>0?a.transition().duration(ivml.animation.duration):a},ivml.buildDirectiveScopeFromElementObject=function(a){var b={};if(a.accessors)for(var c in a.accessors)b[c]="=";if(a.attributes)for(var c in a.attributes)b[c]="=";if(a.events)for(var c in a.events)b[c]="=";return b},ivml.addElementObjectAttributeWatchesToScope=function(a,b){if(a.accessors)for(var c in a.accessors)b.$watch(c,a[c],!0);if(a.attributes)for(var c in a.attributes)b.$watch(c,a[c]);if(a.events)for(var c in a.events)b.$watch(c,a[c])},ivml.timeoutRedraw=function(a,b){a.elements.$timeout?a.elements.redrawOrdered||(a.elements.redrawOrdered=!0,a.elements.$timeout(function(){b?b():a.redraw(),a.elements.redrawOrdered=!1})):b?b():a.redraw()},ivml.generate_set_function_for_accessors=function(a,b,c){return function(d){if(null!=d){if("string"==typeof d&&d.length>1&&"/"===d.charAt(0)){var e=d.substring(1);a.accessors[b]=function(a){return a[e]}}else a.accessors[b]=d;ivml.timeoutRedraw(a,c)}}},ivml.generate_set_function_for_attributes=function(a,b,c){return function(d){if(null!=d){if("string"==typeof d&&d.length>1&&"/"===d.charAt(0)){var e=d.substring(1);a.attributes[b]=function(a){return a[e]}}else a.attributes[b]=d;ivml.timeoutRedraw(a,c)}}},ivml.generate_set_function_for_events=function(a,b,c){return function(d){"function"==typeof d&&(a.events[b]=d,ivml.timeoutRedraw(a,c))}},angular.module("ivml.chart",[]).directive("lineGroup",function(a){return{restrict:"E",require:["^plot","^lineGroup"],controller:function(){this.paths=[],this.addPath=function(a){this.paths.push(a)},this.lineGroupObject=void 0,this.redraw=function(){this.lineGroupObject&&this.lineGroupObject.redraw()},this.getFillGraphic=function(){return this.lineGroupObject?this.lineGroupObject.getFillGraphic():null},this.getLineGraphic=function(){return this.lineGroupObject?this.lineGroupObject.getLineGraphic():null}},scope:{},link:function(b,c,d,e){var f=new ivml.visualElements.LineGroup(e[0],e[1],a);e[0].addElement(f),e[1].lineGroupObject=f}}}).directive("paths",function(a){return{restrict:"E",require:["^plot","?^lineGroup"],scope:ivml.buildDirectiveScopeFromElementObject(ivml.visualElements.Paths(null,null)),link:function(b,c,d,e){var f=ivml.visualElements.Paths(e[0],e[1],a);e[1]?e[1].addPath(f):e[0].addElement(f),ivml.addElementObjectAttributeWatchesToScope(f,b)}}}).directive("plot",function(a){return{restrict:"E",require:"^plot",controller:function(){this.plotObject=null,this.elements=[],this.addElement=function(a){return this.elements.push(a),this.elements.length-1},this.getXScale=function(){return this.plotObject?this.plotObject.elements.xScale:null},this.getYScale=function(){return this.plotObject?this.plotObject.elements.yScale:null},this.getUnmaskedLayer=function(){return this.plotObject?this.plotObject.elements.layers.overMargin:null},this.getMaskedLayer=function(){return this.plotObject?this.plotObject.elements.layers.underMargin:null},this.redraw=function(){this.elements.forEach(function(a){a.redraw()})}},scope:ivml.buildDirectiveScopeFromElementObject(ivml.visualElements.Plot()),link:function(b,c,d,e){e.plotObject=ivml.visualElements.Plot(c[0],e,a),ivml.addElementObjectAttributeWatchesToScope(e.plotObject,b),ivml.timeoutRedraw(e.plotObject)}}}).directive("points",function(a){return{restrict:"E",require:"^plot",scope:ivml.buildDirectiveScopeFromElementObject(new ivml.visualElements.Points(null)),link:function(b,c,d,e){var f=new ivml.visualElements.Points(e,a);e.addElement(f),ivml.addElementObjectAttributeWatchesToScope(f,b)}}}).directive("cylinders",function(a){return{restrict:"E",require:"^plot",scope:ivml.buildDirectiveScopeFromElementObject(new ivml.visualElements.Cylinders(null)),link:function(b,c,d,e){var f=new ivml.visualElements.Cylinders(e,a);e.addElement(f),ivml.addElementObjectAttributeWatchesToScope(f,b)}}}).directive("lineSegments",function(a){return{restrict:"E",require:"^plot",scope:ivml.buildDirectiveScopeFromElementObject(new ivml.visualElements.LineSegments(null)),link:function(b,c,d,e){var f=new ivml.visualElements.LineSegments(e,a);e.addElement(f),ivml.addElementObjectAttributeWatchesToScope(f,b)}}}).directive("errorBars",function(a){return{restrict:"E",require:"^plot",scope:ivml.buildDirectiveScopeFromElementObject(new ivml.visualElements.ErrorBars(null)),link:function(b,c,d,e){var f=new ivml.visualElements.ErrorBars(e,a);e.addElement(f),ivml.addElementObjectAttributeWatchesToScope(f,b)}}}).directive("rectangles",function(a){return{restrict:"E",require:"^plot",scope:ivml.buildDirectiveScopeFromElementObject(new ivml.visualElements.Rectangles(null)),link:function(b,c,d,e){var f=new ivml.visualElements.Rectangles(e,a);e.addElement(f),ivml.addElementObjectAttributeWatchesToScope(f,b)}}}).directive("texts",function(a){return{restrict:"E",require:"^plot",scope:ivml.buildDirectiveScopeFromElementObject(new ivml.visualElements.Texts(null)),link:function(b,c,d,e){var f=new ivml.visualElements.Texts(e,a);e.addElement(f),ivml.addElementObjectAttributeWatchesToScope(f,b)}}}).directive("donutCharts",function(a){return{restrict:"E",require:"^plot",scope:ivml.buildDirectiveScopeFromElementObject(new ivml.visualElements.DonutCharts(null)),link:function(b,c,d,e){var f=new ivml.visualElements.DonutCharts(e,a);e.addElement(f),ivml.addElementObjectAttributeWatchesToScope(f,b)}}}).directive("bars",function(a){return{restrict:"E",require:["^plot","^barGroup"],scope:ivml.buildDirectiveScopeFromElementObject(new ivml.visualElements.Bars(null)),link:function(b,c,d,e){var f=e[0],g=e[1];g.setChartController(f);var h=new ivml.visualElements.Bars(f,g,a),i=g.addElement(h);h.setIndex(i),ivml.addElementObjectAttributeWatchesToScope(h,b)}}}).directive("barGroup",function(){return{restrict:"E",replace:!0,controller:function(){this.elements=[],this.groupObject=null,this.addElement=function(a){return this.elements.push(a),this.elements.length-1},this.chartController=null,this.setChartController=function(a){this.chartController||(this.chartController=a,this.chartController.addElement(this))},this.redraw=function(){if(this.elements.length){if(this.offsets={},"grouped"==this.getType()){var a=this.calculateWidths();if(-1==a)return}for(var a in this.elements)this.elements[a].redraw()}},this.setGroupObject=function(a){this.groupObject=a},this.getType=function(){return this.groupObject?this.groupObject.type():void 0},this.getArrangement=function(){return this.groupObject?this.groupObject.arrangement():void 0},this.getPadding=function(){return this.groupObject?this.groupObject.padding():void 0},this.offset=function(a,b,c){this.offsets[a]||(this.offsets[a]={},this.offsets[a].up=0,this.offsets[a].down=0),c>=0?this.offsets[a].up+=b:this.offsets[a].down+=b},this.getOffset=function(a,b){return this.offsets[a]?b>=0?this.offsets[a].up:this.offsets[a].down:0},this.calculateWidths=function(){if(this.elements.length){this.positionScale="vertical"==this.getArrangement()?this.chartController.getXScale():this.chartController.getYScale(),this.widths={},this.onwidth={};for(var a in this.elements){var a=this.elements[a].calculateWidths();if(-1==a)return-1}}},this.setWidth=function(a,b){isNaN(parseInt(b))||(this.widths[a]?this.widths[a]+=parseInt(b)+parseInt(this.getPadding()):(this.widths[a]=parseInt(b),this.onwidth[a]=0))},this.getGroupPositionOffset=function(a,b,c){var d=this.onwidth[a],e=isNaN(parseInt(c))?0:c;return this.onwidth[a]+=this.getPadding()+e,Math.round(d+this.positionScale.rangeBand()/2-this.widths[a]/2)}},scope:{type:"=",padding:"=",arrangement:"="},link:function(a,b,c,d){var e=new ivml.visualElements.BarGroup(d);d.setGroupObject(e);var f=function(b){a.$watch(b,function(a){e[b](a)})};for(var g in a)-1==g.indexOf("$")&&"this"!=g&&"constructor"!=g&&e[g]&&f(g)}}});var ivml=ivml||{};ivml.visualElements=ivml.visualElements||{},ivml.visualElements.BarGroup=function(a){var b=a,c={type:"stacked",arrangement:"vertical",padding:3};this.generate_set_function=function(a,c){return function(d){return arguments.length?void(d&&(a[c]=d,b.redraw())):a[c]}};for(var d in c)this[d]=this.generate_set_function(c,d)};var ivml=ivml||{};ivml.visualElements=ivml.visualElements||{},ivml.visualElements.Bars=function a(b,c,d){var a={elements:{chartController:b,barController:c,$timeout:d,xscale:null,yscale:null,svg_g:null,frame:null,index:-1},attributes:{fill:"black",fillOpacity:1,stroke:null,strokeOpacity:1,thickness:5},accessors:{data:[],positionFunction:null,valueFunction:null},events:{mouseOverE:null,mouseOutE:null,clickE:null}};a.index=-1,a.setIndex=function(b){a.index=b},a.setGraphics=function(){a.elements.chartController&&!a.elements.svg_g&&(a.elements.svg_g=a.elements.chartController.getMaskedLayer().append("g"))},a.redraw=function(){if(a.elements.chartController&&a.elements.barController){var b=a.elements.chartController.getXScale(),c=a.elements.chartController.getYScale();if(b&&c&&(a.setGraphics(),a.elements.svg_g&&a.accessors.data&&a.accessors.valueFunction&&a.accessors.positionFunction)){var d=a.accessors.valueFunction,e=a.accessors.positionFunction,f=a.elements.svg_g.selectAll("rect").data(a.accessors.data);if("grouped"==a.elements.barController.getType()&&"vertical"==a.elements.barController.getArrangement()&&(f.enter().append("rect"),f.transition().attr("x",function(c,d){var f=a.attributes.thickness;"function"===a.attributes.thickness&&(f=a.attributes.thickness(c,d));var g=a.elements.barController.getGroupPositionOffset(e(c,d),a.index,f);return b(e(c,d))+g}).attr("y",function(a,b){return c(d(a,b)>=0?d(a,b):0)}).attr("height",function(a,b){return Math.abs(c(0)-c(d(a,b))-1)}).attr("width",a.attributes.thickness).attr("fill",a.attributes.fill),f.exit().remove()),"stacked"==a.elements.barController.getType()&&"vertical"==a.elements.barController.getArrangement()){{a.attributes.thickness}f.enter().append("rect"),f.transition().attr("x",function(c,d){var f=a.attributes.thickness;"function"===a.attributes.thickness&&(f=a.attributes.thickness(c,d));var g=b.rangeBand()/2-f/2;return b(e(c,d))+g}).attr("y",function(b,f){if(d(b,f)>=0){var g=a.elements.barController.getOffset(e(b,f),d(b,f));return c(d(b,f))-g}var g=a.elements.barController.getOffset(e(b,f),d(b,f));return c(0)+g}).attr("height",function(b,f){return d(b,f)>=0?(a.elements.barController.offset(e(b,f),c(0)-c(d(b,f)),d(b,f)),c(0)-c(d(b,f))):(a.elements.barController.offset(e(b,f),c(d(b,f))-c(0),d(b,f)),c(d(b,f))-c(0))}).attr("width",a.attributes.thickness).attr("fill",a.attributes.fill),f.exit().remove()}if("grouped"==a.elements.barController.getType()&&"horizontal"==a.elements.barController.getArrangement()&&(f.enter().append("rect"),f.transition().attr("y",function(b,d){var f=a.attributes.thickness;"function"===a.attributes.thickness&&(f=a.attributes.thickness(b,d));var g=a.elements.barController.getGroupPositionOffset(e(b,d),a.index,f);return c(e(b,d))+g}).attr("x",function(a,c){return b(d(a,c)<=0?d(a,c):0)}).attr("width",function(a,c){return Math.abs(b(0)-b(d(a,c))-1)}).attr("height",a.attributes.thickness).attr("fill",a.attributes.fill),f.exit().remove()),"stacked"==a.elements.barController.getType()&&"horizontal"==a.elements.barController.getArrangement()){{a.attributes.thickness}f.enter().append("rect"),f.transition().attr("y",function(b,d){var f=a.attributes.thickness;"function"===a.attributes.thickness&&(f=a.attributes.thickness(b,d));var g=c.rangeBand()/2-f/2;return c(e(b,d))+g}).attr("x",function(c,f){if(d(c,f)>=0){var g=a.elements.barController.getOffset(e(c,f),f);return b(0)+g}var g=a.elements.barController.getOffset(e(c,f),d(c,f));return b(0)-(b(-1*d(c,f))-b(0))-g}).attr("width",function(c,f){return d(c,f)<=0?(a.elements.barController.offset(e(c,f),b(0)-b(d(c,f)),d(c,f)),b(0)-b(d(c,f))):(a.elements.barController.offset(e(c,f),b(d(c,f))-b(0),d(c,f)),Math.abs(b(0)-b(d(c,f))))}).attr("height",a.attributes.thickness).attr("fill",a.attributes.fill),f.exit().remove()}if(a.accessors.top){var b=a.elements.xscale,c=a.elements.yscale;a.events.mouseOutE&&f.on("mouseout",function(b,c){a.events.mouseOutE(b,c,d3.select(this))}),a.events.mouseOverE&&f.on("mouseover",function(b,c){a.events.mouseOverE(b,c,d3.select(this))}),a.events.clickE&&f.on("click",function(b,c){a.events.clickE(b,c,d3.select(this))})}}}},a.calculateWidths=function(){if(!a.accessors.positionFunction)return-1;if(!a.elements.chartController)return-1;if(!a.elements)return-1;a.elements.svg_g||a.setGraphics();var b=a.accessors.data;if(!b)return-1;var c,d=a.elements.chartController.getXScale(),e=a.elements.chartController.getYScale();c="vertical"==a.elements.barController.getArrangement()?d:e;for(var f in b)"function"===a.attributes.thickness?a.elements.barController.setWidth(a.accessors.positionFunction(b[f],f),a.attributes.thickness(b[f],f)):a.elements.barController.setWidth(a.accessors.positionFunction(b[f]),a.attributes.thickness)};for(var e in a.accessors)a[e]=ivml.generate_set_function_for_accessors(a,e,function(){a.elements.barController.redraw()});for(var e in a.attributes)a[e]=ivml.generate_set_function_for_attributes(a,e,function(){a.elements.barController.redraw()});for(var e in a.events)a[e]=ivml.generate_set_function_for_events(a,e,function(){a.elements.barController.redraw()});return a};var ivml=ivml||{};ivml.visualElements=ivml.visualElements||{},ivml.visualElements.Chart=function(a,b){var c={width:400,height:400,margin:{left:40,right:40,top:40,bottom:40},lenged_font_size:15},d={duration:30},e={xscale:{},yscale:{},xlabel:{},ylabel:{},xaxis:null,yaxis:{},xticks:8,yticks:5,svg:null,frame:{},panel:{},panelWidth:null,panelHeight:null,xminimum:-1,xmaximum:1,yminimum:-1,ymaximum:1,controller:b,xodomain:null,yodomain:null,xaxisAttribute:"ivml_placeholder",duration:1};this.updateYLabel=function(){var a=e.svg.select("text.ylabel");a.transition().duration(d.duration).text(e.ylabel)},this.updateXLabel=function(){e.svg.select("text.xlabel").transition().attr("text-anchor","end").attr("y",c.height-c.lenged_font_size).attr("x",c.width).attr("dy","0.75em").text(e.xlabel)},this.updateXAxis=function(){var a=c.width-c.margin.left-c.margin.right,b=c.height-c.margin.top-c.margin.bottom;if(e.xscale=e.xodomain?d3.scale.ordinal().domain(e.xodomain).rangeBands([0,a],.05):d3.scale.linear().domain([e.xminimum,e.xmaximum]).range([0,a]),e.xaxis=d3.svg.axis().scale(e.xscale).orient("bottom").ticks(e.xticks),e.frame.selectAll){var d=e.frame.selectAll("#xaxis");d.empty()?e.frame.append("g").attr("transform","translate(0,0)").attr("class","axis").attr("id","xaxis").call(e.xaxis).selectAll("text").style("font-size","8pt"):d.transition().duration(e.duration).call(e.xaxis).attr("transform","translate(0,"+b+")").selectAll("text").attr("transform","translate(0,0)").style("font-size","8pt"),this.updateXLabel()}},this.updateYAxis=function(){var a=c.height-c.margin.top-c.margin.bottom;if(e.yscale=e.yodomain?d3.scale.ordinal().domain(e.yodomain).rangeBands([0,a],.05):d3.scale.linear().domain([e.yminimum,e.ymaximum]).range([a,0]),e.yaxis=d3.svg.axis().scale(e.yscale).orient("left").ticks(e.yticks),e.frame.selectAll){var b=e.frame.selectAll("#yaxis");b.empty()?e.frame.append("g").attr("class","axis").attr("id","yaxis").call(e.yaxis).selectAll("text").style("font-size","8pt"):b.transition().duration(e.duration).call(e.yaxis).selectAll("text").style("font-size","8pt"),this.updateYLabel()}},this.redraw=function(){if(null==e.svg){e.svg=d3.select(a[0]).append("svg"),e.svg.transition().duration(d.duration).attr({width:c.width,height:c.height}),e.svg.append("text").classed("ylabel",!0).attr("text-anchor","end").attr("y",0).attr("x",0).attr("dy","0.75em").attr("transform","rotate(-90)").text("null"),e.svg.append("text").classed("xlabel",!0).attr("text-anchor","end").attr("y",c.height-c.lenged_font_size).attr("x",c.width).attr("dy","0.75em").text("null");var f=c.width-c.margin.left-c.margin.right,g=c.height-c.margin.top-c.margin.bottom;e.panelWidth=f,e.panelHeight=g,e.frame=e.svg.append("g").attr("transform","translate("+c.margin.left+","+c.margin.top+")").classed("panel",!0),this.updateXAxis(),this.updateYAxis(),b.setFrame(e.frame),b.setXScale(e.xscale),b.setYScale(e.yscale),b.redraw()}else{e.svg.transition().duration(d.duration).attr({width:c.width,height:c.height}),e.svg.select("text.ylabel").transition().attr("text-anchor","end").attr("y",0).attr("x",0).attr("dy","0.75em").attr("transform","rotate(-90)").text("null"),e.svg.select("text.xlabel").transition().attr("text-anchor","end").attr("y",c.height-c.lenged_font_size).attr("x",c.width).attr("dy","0.75em").text("null");var f=c.width-c.margin.left-c.margin.right,g=c.height-c.margin.top-c.margin.bottom;e.panelWidth=f,e.panelHeight=g,e.frame.attr("transform","translate("+c.margin.left+","+c.margin.top+")"),this.updateXAxis(),this.updateYAxis(),b.setXScale(e.xscale),b.setYScale(e.yscale),b.redraw()}},this.generate_set_function_redraw=function(a,b){return function(c){return arguments.length?void(null!=c&&(a[b]=c,this.redraw())):a[b]}};for(i in e)this[i]=this.generate_set_function_redraw(e,i);for(i in c)this[i]=this.generate_set_function_redraw(c,i);this.getFrame=function(){return e.frame}};var ivml=ivml||{};ivml.visualElements=ivml.visualElements||{},ivml.visualElements.Cylinders=function b(a,c){var b={elements:{controller:a,$timeout:c,svg_g:null},accessors:{data:[],centerxfunction:null,centeryfunction:null,adjustyfunction:0,adjustxfunction:0,height:10,width:30},attributes:{radius:1,fill:"#000000",fillOpacity:1,stroke:"none",strokeOpacity:1,strokeDasharray:"none"},events:{mouseOverE:null,mouseOutE:null,clickE:null}};b.setGraphics=function(){b.elements.controller&&!b.elements.svg_g&&(b.elements.svg_g=b.elements.controller.getUnmaskedLayer().append("g"))},b.redraw=function(){if(b.elements.controller){var a=b.elements.controller.getXScale(),c=b.elements.controller.getYScale();if(a&&c&&(b.setGraphics(),b.elements.svg_g&&b.accessors.data&&b.accessors.centerxfunction&&b.accessors.centeryfunction&&null!=b.accessors.adjustxfunction&&null!=b.accessors.adjustyfunction&&b.accessors.height&&b.accessors.width)){var d=b.accessors.centerxfunction,e=b.accessors.centeryfunction,f=b.accessors.adjustxfunction,g=b.accessors.adjustyfunction,h=b.accessors.width,i=b.accessors.height,j=0,k=0,l=b.accessors.data;a.rangeBand&&(j+=a.rangeBand()/2,l=l.filter(function(b,c){return a.domain().indexOf(d(b,c))>=0})),c.rangeBand&&(k+=c.rangeBand()/2,l=l.filter(function(a,b){return c.domain().indexOf(e(a,b))>=0}));var m=b.elements.svg_g.selectAll("g").data(l),n=m.enter().append("g");n.append("ellipse"),n.append("rect"),n.append("line"),n.append("line"),n.append("ellipse"),m.exit().remove(),m=b.elements.svg_g.selectAll("g"),m.each(function(l,m){function n(a,b){return p+(0===b?-r:r)/2}var o=d3.select(this),p=a(d(l,m))+(ivml.isF(f)?f(l,m):f)+j,q=c(e(l,m))+(ivml.isF(g)?g(l,m):g)+k,r=ivml.isF(h)?h(l,m):h,s=ivml.isF(i)?i(l,m):i;o.selectAll("ellipse").attr("cx",p).attr("rx",r/2).attr("cy",function(a,b){return 0===b?q+s/3:q-s/3}).attr("ry",s/6).attr("fill",b.attributes.fill).style("fill-opacity",b.attributes.fillOpacity).style("stroke",b.attributes.stroke).style("stroke-opacity",b.attributes.strokeOpacity).style("stroke-dasharray",b.attributes.strokeDasharray),o.selectAll("rect").attr("x",p-r/2).attr("y",q-s/3).attr("height",2*s/3).attr("width",r).attr("fill",b.attributes.fill).style("fill-opacity",b.attributes.fillOpacity).style("stroke","none"),o.selectAll("line").attr("x1",n).attr("x2",n).attr("y1",q-s/3).attr("y2",q+s/3).style("stroke",b.attributes.stroke).style("stroke-opacity",b.attributes.strokeOpacity).style("stroke-dasharray",b.attributes.strokeDasharray)}),m.style("visibility",function(b,f){if(!a.rangeBand){var g=d(b,f);if(a.domain()[0]>g||g>a.domain()[1])return"hidden"}if(!c.rangeBand){var h=e(b,f);if(c.domain()[0]>h||h>c.domain()[1])return"hidden"}return"visible"}),b.events.mouseOutE&&m.on("mouseout",function(a,c){b.events.mouseOutE(a,c,d3.select(this))}),b.events.mouseOverE&&m.on("mouseover",function(a,c){b.events.mouseOverE(a,c,d3.select(this))}),b.events.clickE&&m.on("click",function(a,c){b.events.clickE(a,c,d3.select(this))})}}};for(var d in b.accessors)b[d]=ivml.generate_set_function_for_accessors(b,d);for(var d in b.attributes)b[d]=ivml.generate_set_function_for_attributes(b,d);for(var d in b.events)b[d]=ivml.generate_set_function_for_events(b,d);return b};var ivml=ivml||{};ivml.visualElements=ivml.visualElements||{},ivml.visualElements.DonutCharts=function c(a,b){var c={elements:{controller:a,$timeout:b,svg_g:null,array_of_gs:[]},accessors:{data:[],xfunction:null,yfunction:null,sliceFunction:null,fillFunction:function(a,b){for(var c=d3.scale.category20(),d=0;20>d;++d)c(d);return c(b)}},attributes:{fillOpacity:1,stroke:"none",strokeOpacity:1,innerRadius:5,outerRadius:20},events:{mouseOverE:null,mouseOutE:null,clickE:null}};c.setGraphics=function(){c.elements.controller&&!c.elements.svg_g&&(c.elements.svg_g=c.elements.controller.getUnmaskedLayer().append("g"))},c.redraw=function(){if(c.elements.controller){var a=c.elements.controller.getXScale(),b=c.elements.controller.getYScale();if(a&&b&&(c.setGraphics(),c.elements.svg_g&&c.accessors.data&&c.accessors.xfunction&&c.accessors.yfunction&&c.accessors.sliceFunction)){var d=c.accessors.xfunction,e=c.accessors.yfunction,f=0,g=0;a.rangeBand&&(f+=a.rangeBand()/2),b.rangeBand&&(g+=b.rangeBand()/2);var h=0,i=c.accessors.data;for(var j in i){var k=d3.layout.pie().sort(null),l=c.attributes.innerRadius;"function"===c.attributes.innerRadius&&(l=c.attributes.innerRadius(i[j],j));var m=c.attributes.outerRadius;"function"===c.attributes.outerRadius&&(m=c.attributes.outerRadius(i[j],j));var n=d3.svg.arc().innerRadius(l).outerRadius(m),k=d3.layout.pie().sort(null);c.elements.array_of_gs[h]||(c.elements.array_of_gs[h]=c.elements.svg_g.append("g"));var o=a(d(i[j],j)),p=b(e(i[j],j)),q=c.accessors.sliceFunction(i[j],j);c.elements.array_of_gs[h].attr("transform","translate("+(o+f)+","+(p+g)+")");var r=c.elements.array_of_gs[h].selectAll("paths").data(k(q));r.enter().append("path").attr("stroke-opacity",c.attributes.strokeOpacity).attr("fill-opacity",c.attributes.fillOpacity).attr("stroke",c.attributes.stroke).attr("d",n),r.transition().attr("fill",function(a,b){return c.accessors.fillFunction(a,b)}).attr("stroke-opacity",c.attributes.strokeOpacity).attr("fill-opacity",c.attributes.fillOpacity).attr("stroke",c.attributes.stroke).attr("d",n),c.events.mouseOutE&&r.on("mouseout",function(a,b){c.events.mouseOutE(a,b,d3.select(this))}),c.events.mouseOverE&&r.on("mouseover",function(a,b){c.events.mouseOverE(a,b,d3.select(this))}),c.events.clickE&&r.on("click",function(a,b){c.events.clickE(a,b,d3.select(this))}),r.exit().remove(),h+=1}for(var s=h;s<c.elements.array_of_gs.length;++s)c.elements.array_of_gs[s].selectAll("path").remove()}}};for(var d in c.accessors)c[d]=ivml.generate_set_function_for_accessors(c,d);for(var d in c.attributes)c[d]=ivml.generate_set_function_for_attributes(c,d);for(var d in c.events)c[d]=ivml.generate_set_function_for_events(c,d);return c};var ivml=ivml||{};ivml.visualElements=ivml.visualElements||{},ivml.visualElements.ErrorBars=function d(a,b){var d={elements:{controller:a,$timeout:b,xscale:null,yscale:null,svg_g:null,frame:null},attributes:{stroke:"blue",strokeWidth:3,strokeOpacity:1},accessors:{data:[],upFunction:null,downFunction:null,leftFunction:null,rightFunction:null,xcenterFunction:null,ycenterFunction:null},events:{mouseOverE:null,mouseOutE:null,clickE:null}};d.setGraphics=function(){d.elements.controller&&!d.elements.svg_g&&(d.elements.svg_g=d.elements.controller.getMaskedLayer().append("g"))},d.redraw=function(){if(d.elements.controller){var a=d.elements.controller.getXScale(),b=d.elements.controller.getYScale();if(a&&b&&(d.setGraphics(),d.elements.svg_g&&d.accessors.data&&d.accessors.xcenterFunction&&d.accessors.ycenterFunction)){var c=d.accessors.xcenterFunction,e=d.accessors.ycenterFunction,f=0,g=0;a.rangeBand&&(f+=a.rangeBand()/2),b.rangeBand&&(g+=b.rangeBand()/2);var h=d.accessors.upFunction,i=d.accessors.downFunction,j=d.accessors.leftFunction,k=d.accessors.rightFunction;if(h){var l=d.elements.svg_g.selectAll("#upbars").data(d.accessors.data);l.enter().append("line").attr("x1",function(b,d){return a(c(b,d))+f}).attr("y1",function(a,c){return b(e(a,c))+g}).attr("x2",function(b,d){return a(c(b,d))+f}).attr("y2",function(a,c){return b(e(a,c)+h(a,c))+g}).attr("id","upbars").attr("stroke",d.attributes.stroke).attr("stroke-width",d.attributes.strokeWidth).attr("stroke-opacity",d.attributes.strokeOpacity),l.transition().attr("x1",function(b,d){return a(c(b,d))+f}).attr("y1",function(a,c){return b(e(a,c))+g}).attr("x2",function(b,d){return a(c(b,d))+f}).attr("y2",function(a,c){return b(e(a,c)+h(a,c))+g}).attr("id","upbars").attr("stroke",d.attributes.stroke).attr("stroke-width",d.attributes.strokeWidth).attr("stroke-opacity",d.attributes.strokeOpacity),l.exit().remove(),d.events.mouseOutE&&l.on("mouseout",function(a,b){d.events.mouseOutE(a,b,d3.select(this))}),d.events.mouseOverE&&l.on("mouseover",function(a,b){d.events.mouseOverE(a,b,d3.select(this))}),d.events.clickE&&l.on("click",function(a,b){d.events.clickE(a,b,d3.select(this))})}if(i){var m=d.elements.svg_g.selectAll("#downbars").data(d.accessors.data);m.enter().append("line").attr("x1",function(b,d){return a(c(b,d))+f}).attr("y1",function(a,c){return b(e(a,c))+g}).attr("x2",function(b,d){return a(c(b,d))+f}).attr("y2",function(a,c){return b(e(a,c)-i(a,c))+g}).attr("id","downbars").attr("stroke",d.attributes.stroke).attr("stroke-width",d.attributes.strokeWidth).attr("stroke-opacity",d.attributes.strokeOpacity),m.transition().attr("x1",function(b,d){return a(c(b,d))+f}).attr("y1",function(a,c){return b(e(a,c))+g}).attr("x2",function(b,d){return a(c(b,d))+f}).attr("y2",function(a,c){return b(e(a,c)-i(a,c))+g}).attr("id","downbars").attr("stroke",d.attributes.stroke).attr("stroke-width",d.attributes.strokeWidth).attr("stroke-opacity",d.attributes.strokeOpacity),m.exit().remove(),d.events.mouseOutE&&m.on("mouseout",function(a,b){d.events.mouseOutE(a,b,d3.select(this))}),d.events.mouseOverE&&m.on("mouseover",function(a,b){d.events.mouseOverE(a,b,d3.select(this))}),d.events.clickE&&m.on("click",function(a,b){d.events.clickE(a,b,d3.select(this))})}if(j){var n=d.elements.svg_g.selectAll("#leftbars").data(d.accessors.data);n.enter().append("line").attr("x1",function(b,d){return a(c(b,d))+f}).attr("y1",function(a,c){return b(e(a,c))+g}).attr("x2",function(b,d){return a(c(b,d)-j(b,d))+f}).attr("y2",function(a,c){return b(e(a,c))+g}).attr("id","leftbars").attr("stroke",d.attributes.stroke).attr("stroke-width",d.attributes.strokeWidth).attr("stroke-opacity",d.attributes.strokeOpacity),n.transition().attr("x1",function(b,d){return a(c(b,d))+g}).attr("y1",function(a,c){return b(e(a,c))+f}).attr("x2",function(b,d){return a(c(b,d)-j(b,d))+g}).attr("y2",function(a,c){return b(e(a,c))+f}).attr("id","leftbars").attr("stroke",d.attributes.stroke).attr("stroke-width",d.attributes.strokeWidth).attr("stroke-opacity",d.attributes.strokeOpacity),n.exit().remove(),d.events.mouseOutE&&n.on("mouseout",function(a,b){d.events.mouseOutE(a,b,d3.select(this))}),d.events.mouseOverE&&n.on("mouseover",function(a,b){d.events.mouseOverE(a,b,d3.select(this))}),d.events.clickE&&n.on("click",function(a,b){d.events.clickE(a,b,d3.select(this))})}if(k){var o=d.elements.svg_g.selectAll("#rightbars").data(d.accessors.data);o.enter().append("line").attr("x1",function(b,d){return a(c(b,d))+f}).attr("y1",function(a,c){return b(e(a,c))+g}).attr("x2",function(b,d){return a(c(b,d)+k(b,d))+f}).attr("y2",function(a,c){return b(e(a,c))+g}).attr("id","rightbars").attr("stroke",d.attributes.stroke).attr("stroke-width",d.attributes.strokeWidth).attr("stroke-opacity",d.attributes.strokeOpacity),o.transition().attr("x1",function(b,d){return a(c(b,d))+f}).attr("y1",function(a,c){return b(e(a,c))+g}).attr("x2",function(b,d){return a(c(b,d)+k(b,d))+f}).attr("y2",function(a,c){return b(e(a,c))+g}).attr("id","rightbars").attr("stroke",d.attributes.stroke).attr("stroke-width",d.attributes.strokeWidth).attr("stroke-opacity",d.attributes.strokeOpacity),o.exit().remove(),d.events.mouseOutE&&o.on("mouseout",function(a,b){d.events.mouseOutE(a,b,d3.select(this))}),d.events.mouseOverE&&o.on("mouseover",function(a,b){d.events.mouseOverE(a,b,d3.select(this))}),d.events.clickE&&o.on("click",function(a,b){d.events.clickE(a,b,d3.select(this))})}}}};for(var c in d.accessors)d[c]=ivml.generate_set_function_for_accessors(d,c);for(var c in d.attributes)d[c]=ivml.generate_set_function_for_attributes(d,c);for(var c in d.events)d[c]=ivml.generate_set_function_for_events(d,c);return d};var ivml=ivml||{};ivml.visualElements=ivml.visualElements||{},ivml.visualElements.LineGroup=function e(a,b,c){function d(){e.elements.controller&&(e.elements.svg_g&&e.elements.svg_gFills&&e.elements.svg_gLines||(e.elements.svg_g=e.elements.controller.getMaskedLayer().append("g"),e.elements.svg_gFills=e.elements.svg_g.append("g"),e.elements.svg_gLines=e.elements.svg_g.append("g")))}var e={elements:{controller:a,lineGroupController:b,$timeout:c,svg_g:null,svg_gFills:null,svg_gLines:null}};return e.getFillGraphic=function(){return d(),e.elements.svg_gFills},e.getLineGraphic=function(){return d(),e.elements.svg_gLines},e.redraw=function(){function a(a,b,c,d,e){return d+(a-b)/(c-b)*(e-d)}function b(b,c){if(c.length>0)for(var d=0;d<c.length;d++){var e=c[d];if(e[0]===b)return e[1];if(d<c.length-1){var f=c[d+1];if(e[0]<b&&b<f[0])return a(b,e[0],f[0],e[1],f[1])}}return void 0}if(e.elements.controller&&e.elements.lineGroupController){var c=e.elements.controller.getXScale();if(c){var d=e.elements.lineGroupController.paths.map(function(a){return a.getAllPathsPoints()}),f=[];d.forEach(function(a){a.forEach(function(a){a.forEach(function(a){-1===f.indexOf(a[0])&&f.push(a[0])})})}),c.rangeBand||(f=f.sort(d3.ascending));var g=f.map(function(a){var b=[a,0];return b.lastY=0,b.previousStarts=!1,b.previousEnds=!1,b});d.forEach(function(a,c){e.elements.lineGroupController.paths[c].setCumulativePaths(a.map(function(a){var c=a.slice(0).sort(function(a,b){return a[0]<b[0]?-1:a[0]>b[0]?1:0}),d=[],e=[],f=void 0;return g.forEach(function(a){var g=b(a[0],c);void 0!==g?(a.previousStarts&&f&&d.push([a[0],a.lastY,!1]),d.push([a[0],a[1],!1]),a.previousEnds&&c[c.length-1][0]!==a[0]&&d.push([a[0],a.lastY,!1]),a.previousStarts||a.previousEnds||(a.lastY=a[1]),g+=a[1],e.push([a[0],g,!0]),a[1]=g,a.previousStarts=!f,a.previousEnds=!1,f=a):f&&(a.previousStarts=!1,f.previousEnds=!0,f=void 0)}),e.concat(d.reverse())}))})}}},e};var ivml=ivml||{};ivml.visualElements=ivml.visualElements||{},ivml.visualElements.LineSegments=function f(a,b){var f={elements:{controller:a,$timeout:b,xscale:null,yscale:null,svg_g:null,frame:null},attributes:{stroke:"gray",strokeWidth:3,strokeOpacity:1,strokeDasharray:"10"},accessors:{data:[],x1Function:null,y1Function:null,x2Function:null,y2Function:null},events:{mouseOverE:null,mouseOutE:null,clickE:null}};f.setGraphics=function(){f.elements.controller&&!f.elements.svg_g&&(f.elements.svg_g=f.elements.controller.getMaskedLayer().append("g"))},f.redraw=function(){if(f.elements.controller){var a=f.elements.controller.getXScale(),b=f.elements.controller.getYScale();
if(a&&b&&(f.setGraphics(),f.elements.svg_g&&f.accessors.data&&f.accessors.x1Function&&f.accessors.y1Function&&f.accessors.x2Function&&f.accessors.y2Function)){var c=f.accessors.x1Function,d=f.accessors.y1Function,e=f.accessors.x2Function,g=f.accessors.y2Function,h=0,i=0;a.rangeBand&&(h+=a.rangeBand()/2),b.rangeBand&&(i+=b.rangeBand()/2);var j=f.elements.svg_g.selectAll("line").data(f.accessors.data);j.enter().append("line").attr("x1",function(b,d){return a(c(b,d))+h}).attr("y1",function(a,c){return b(d(a,c))+i}).attr("x2",function(b,c){return a(e(b,c))+h}).attr("y2",function(a,c){return b(g(a,c))+i}).attr("stroke",f.attributes.stroke).attr("stroke-width",f.attributes.strokeWidth).attr("stroke-opacity",f.attributes.strokeOpacity).attr("stroke-dasharray",f.attributes.strokeDasharray),j.transition().attr("x1",function(b){return a(c(b))+h}).attr("y1",function(a){return b(d(a))+i}).attr("x2",function(b){return a(e(b))+h}).attr("y2",function(a){return b(g(a))+i}).attr("stroke",f.attributes.stroke).attr("stroke-width",f.attributes.strokeWidth).attr("stroke-opacity",f.attributes.strokeOpacity).attr("stroke-dasharray",f.attributes.strokeDasharray),j.exit().remove(),f.events.mouseOutE&&j.on("mouseout",function(a,b){f.events.mouseOutE(a,b,d3.select(this))}),f.events.mouseOverE&&j.on("mouseover",function(a,b){f.events.mouseOverE(a,b,d3.select(this))}),f.events.clickE&&j.on("click",function(a,b){f.events.clickE(a,b,d3.select(this))})}}};for(var c in f.accessors)f[c]=ivml.generate_set_function_for_accessors(f,c);for(var c in f.attributes)f[c]=ivml.generate_set_function_for_attributes(f,c);for(var c in f.events)f[c]=ivml.generate_set_function_for_events(f,c);return f};var ivml=ivml||{};ivml.visualElements=ivml.visualElements||{},ivml.visualElements.Paths=function g(a,b,c){var g={elements:{controller:a,lineGroupController:b,$timeout:c,cumulativePaths:void 0,svg_g:null,svg_gFill:null,svg_gLine:null},attributes:{stroke:"gray",strokeWidth:3,strokeOpacity:1,strokeDasharray:"none",fill:"none",fillOpacity:1,interpolate:"linear"},accessors:{data:[],pointsFunction:null,xfunction:null,yfunction:null}};g.getAllPathsPoints=function(){if(g.elements.controller){var a=g.accessors.pointsFunction,b=g.elements.controller.getXScale(),c=g.elements.controller.getYScale(),d=g.accessors.xfunction,e=g.accessors.yfunction;if(a&&b&&c&&d&&e&&g.accessors.data)return g.accessors.data.map(function(f){return f=a(f).map(function(a,b){return[d(a,b),e(a,b)]}),b.rangeBand&&(f=f.filter(function(a){return b.domain().indexOf(a[0])>=0})),c.rangeBand&&(f=f.filter(function(a){return c.domain().indexOf(a[1])>=0})),f})}return[]},g.setCumulativePaths=function(a){g.elements.cumulativePaths=a,g.redraw()},g.setGraphics=function(){g.elements.lineGroupController?g.elements.svg_gFill&&g.elements.svg_gLine||(g.elements.svg_gFill=g.elements.lineGroupController.getFillGraphic().append("g"),g.elements.svg_gLine=g.elements.lineGroupController.getLineGraphic().append("g")):g.elements.controller&&!g.elements.svg_g&&(g.elements.svg_g=g.elements.controller.getMaskedLayer().append("g"))},g.redraw=function(){if(g.elements.controller&&g.accessors.data&&g.accessors.pointsFunction&&g.accessors.xfunction&&g.accessors.yfunction){var a=g.elements.controller.getXScale();if(a){var b=g.elements.controller.getYScale();if(b){g.setGraphics();var c=0;a.rangeBand&&(c+=a.rangeBand()/2);var d=0;if(b.rangeBand&&(d+=b.rangeBand()/2),g.elements.lineGroupController){if(!g.elements.cumulativePaths)return;if(!g.elements.svg_gFill||!g.elements.svg_gLine)return;var e=d3.svg.line().x(function(b){return a(b[0])+c}).y(function(a){return b(a[1])}),f=ivml.isF(g.attributes.interpolate);f||e.interpolate(g.attributes.interpolate);var h=g.elements.svg_gFill.selectAll("path").data(g.accessors.data);h.enter().append("path").attr("d",function(a,b){return f&&e.interpolate(g.attributes.interpolate(a,b)),e(g.elements.cumulativePaths[b])||"M0,0"}).attr("stroke","none").attr("fill",g.attributes.fill).attr("fill-opacity",g.attributes.fillOpacity),h.attr("d",function(a,b){return f&&e.interpolate(g.attributes.interpolate(a,b)),e(g.elements.cumulativePaths[b])||"M0,0"}).attr("stroke","none").attr("fill",g.attributes.fill).attr("fill-opacity",g.attributes.fillOpacity),h.exit().remove();var i=g.elements.svg_gLine.selectAll("path").data(g.accessors.data);i.enter().append("path").attr("d",function(a,b){return f&&e.interpolate(g.attributes.interpolate(a,b)),e(g.elements.cumulativePaths[b].filter(function(a){return a[2]}))||"M0,0"}),i.attr("d",function(a,b){return f&&e.interpolate(g.attributes.interpolate(a,b)),e(g.elements.cumulativePaths[b].filter(function(a){return a[2]}))||"M0,0"}).attr("stroke",g.attributes.stroke).attr("stroke-width",g.attributes.strokeWidth).attr("stroke-opacity",g.attributes.strokeOpacity).attr("stroke-dasharray",g.attributes.strokeDasharray).attr("fill","none"),i.exit().remove()}else{if(!g.elements.svg_g)return;var e=d3.svg.line().x(function(b){return a(b[0])+c}).y(function(a){return b(a[1])+d}),f=ivml.isF(g.attributes.interpolate);f||e.interpolate(g.attributes.interpolate);var j=g.getAllPathsPoints(),k=g.elements.svg_g.selectAll("path").data(g.accessors.data);k.enter().append("path").attr("d",function(a,b){return f&&e.interpolate(g.attributes.interpolate(a,b)),e(j[b])||"M0,0"}),ivml.animateSelection(k).attr("d",function(a,b){return f&&e.interpolate(g.attributes.interpolate(a,b)),e(j[b])||"M0,0"}).attr("stroke",g.attributes.stroke).attr("stroke-width",g.attributes.strokeWidth).attr("stroke-opacity",g.attributes.strokeOpacity).attr("stroke-dasharray",g.attributes.strokeDasharray).attr("fill",g.attributes.fill).attr("fill-opacity",g.attributes.fillOpacity),k.exit().remove()}}}}};for(var d in g.accessors)g[d]=ivml.generate_set_function_for_accessors(g,d,function(){g.elements.lineGroupController?g.elements.lineGroupController.redraw():g.redraw()});for(var d in g.attributes)g[d]=ivml.generate_set_function_for_attributes(g,d,function(){g.elements.lineGroupController?g.elements.lineGroupController.redraw():g.redraw()});return g};var ivml=ivml||{};ivml.visualElements=ivml.visualElements||{},ivml.visualElements.Plot=function(a,b,c){var d={elements:{element:a,controller:b,$timeout:c,svg:void 0,mainContainer:void 0,layers:{xGrid:void 0,yGrid:void 0,brush:void 0,underMargin:void 0,margin:void 0,overMargin:void 0,xAxis:void 0,yAxis:void 0},xAxisText:void 0,yAxisText:void 0,plotLabelText:void 0,xScale:void 0,yScale:void 0,brush:void 0},attributes:{background:"#FFFFFF",plotBackground:null,plotLabelText:"",plotLabelFontSize:"12px",plotLabelFontColor:"#000000",marginTop:30,marginRight:20,marginBottom:60,marginLeft:60,width:500,height:500,xmin:0,xmax:1,xticks:null,xtickFormatFunction:null,xodomain:null,xaxisVisibility:"visible",xaxisLabelText:"",xaxisTextMaxWidth:null,xaxisTruncateEnding:"...",ymin:0,ymax:1,yticks:null,ytickFormatFunction:null,yodomain:null,yaxisVisibility:"visible",yaxisLabelText:"",yaxisTextMaxWidth:null,yaxisTruncateEnding:"...",xaxisFill:"none",xaxisStroke:"#000000",xaxisShapeRendering:"crispEdges",xaxisFontFamily:"sans-serif",xaxisFontSize:"10px",xaxisFontColor:"#000000",xaxisTickSize:6,yaxisFill:"none",yaxisStroke:"#000000",yaxisShapeRendering:"crispEdges",yaxisFontFamily:"sans-serif",yaxisFontSize:"10px",yaxisFontColor:"#000000",yaxisTickSize:6,xgridlinesVisibility:"visible",xgridlinesFill:"none",xgridlinesStroke:"#CCC",xgridlinesShapeRendering:"crispEdges",xgridlinesOpacity:"0.4",ygridlinesVisibility:"visible",ygridlinesFill:"none",ygridlinesStroke:"#CCC",ygridlinesShapeRendering:"crispEdges",ygridlinesOpacity:"0.4",brushStroke:"#fff",brushFill:"#000000",brushFillOpacity:".125",brushShapeRendering:"crispEdges",brushClearOnRedraw:!1},events:{brushstart:null,brush:null,brushend:null,xbrushstart:null,xbrush:null,xbrushend:null,ybrushstart:null,ybrush:null,ybrushend:null}};d.redraw=function(){if(d.elements.element&&d.elements.controller){var a=d.attributes.xodomain?d3.scale.ordinal().domain(d.attributes.xodomain).rangeBands([0,d.attributes.width],.05):d3.scale.linear().range([0,d.attributes.width]).domain([d.attributes.xmin,d.attributes.xmax]),b=d.attributes.yodomain?d3.scale.ordinal().domain(d.attributes.yodomain).rangeBands([0,d.attributes.height],.05):d3.scale.linear().range([d.attributes.height,0]).domain([d.attributes.ymin,d.attributes.ymax]),c=d3.svg.axis().scale(a).orient("bottom").tickSize(d.attributes.xaxisTickSize),e=d3.svg.axis().scale(a).orient("bottom").tickSize(-d.attributes.height).tickFormat(""),f=d3.svg.axis().scale(b).orient("left").tickSize(d.attributes.yaxisTickSize),g=d3.svg.axis().scale(b).orient("left").tickSize(-d.attributes.width).tickFormat("");if(d.elements.xScale=a,d.elements.yScale=b,d.attributes.xticks&&(c.ticks(ivml.clampIntegerToTicks(d.attributes.xticks)),e.ticks(ivml.clampIntegerToTicks(d.attributes.xticks))),d.attributes.yticks&&(f.ticks(ivml.clampIntegerToTicks(d.attributes.yticks)),g.ticks(ivml.clampIntegerToTicks(d.attributes.yticks))),d.attributes.xtickFormatFunction&&c.tickFormat(d.attributes.xtickFormatFunction),d.attributes.xtickFormatFunction||d.attributes.xaxisTextMaxWidth){var h=d.attributes.xaxisTextMaxWidth?function(a){for(var b=d.attributes.xaxisTextMaxWidth,c=d.attributes.xaxisTruncateEnding?d.attributes.xaxisTruncateEnding:"",e=d.attributes.xtickFormatFunction?d.attributes.xtickFormatFunction(a):a,f=e;e.length&&ivml.getTextWidthInPixels(f,d.attributes.xaxisFontFamily,d.attributes.xaxisFontSize)>b;)e=e.slice(0,-1),f=e+c;return f}:d.attributes.xtickFormatFunction;c.tickFormat(h)}if(d.attributes.ytickFormatFunction||d.attributes.yaxisTextMaxWidth){var h=d.attributes.yaxisTextMaxWidth?function(a){for(var b=d.attributes.yaxisTextMaxWidth,c=d.attributes.yaxisTruncateEnding?d.attributes.yaxisTruncateEnding:"",e=d.attributes.ytickFormatFunction?d.attributes.ytickFormatFunction(a):a,f=e;e.length&&ivml.getTextWidthInPixels(f,d.attributes.yaxisFontFamily,d.attributes.yaxisFontSize)>b;)e=e.slice(0,-1),f=e+c;return f}:d.attributes.ytickFormatFunction;f.tickFormat(h)}if(!d.elements.svg){d.elements.svg=d3.select(d.elements.element).append("svg"),d.elements.mainContainer=d.elements.svg.append("g");for(var i in d.elements.layers)d.elements.layers[i]=d.elements.mainContainer.append("g");d.elements.xAxisText=d.elements.mainContainer.append("text").classed("x-axis-group-text",!0).attr("text-anchor","end"),d.elements.yAxisText=d.elements.mainContainer.append("text").attr("text-anchor","end"),d.elements.plotLabelText=d.elements.mainContainer.append("text").style("font-weight","bold").attr("text-anchor","start")}d.elements.svg.attr("height",d.attributes.height+d.attributes.marginTop+d.attributes.marginBottom).attr("width",d.attributes.width+d.attributes.marginLeft+d.attributes.marginRight).style("background",d.attributes.plotBackground||d.attributes.background),d.elements.mainContainer.attr("transform","translate("+d.attributes.marginLeft+", "+d.attributes.marginTop+")");var j=2,k=[];d.attributes.marginTop>0&&k.push({x:-d.attributes.marginLeft,y:-d.attributes.marginTop,width:d.attributes.width+d.attributes.marginLeft+d.attributes.marginRight,height:d.attributes.marginTop-j}),d.attributes.marginLeft>0&&k.push({x:-d.attributes.marginLeft,y:-d.attributes.marginTop,width:d.attributes.marginLeft-j,height:d.attributes.height+d.attributes.marginTop+d.attributes.marginBottom}),d.attributes.marginBottom>0&&k.push({x:-d.attributes.marginLeft,y:d.attributes.height+j,width:d.attributes.width+d.attributes.marginLeft+d.attributes.marginRight,height:d.attributes.marginBottom-j}),d.attributes.marginRight>0&&k.push({x:d.attributes.width+j,y:-d.attributes.marginTop,width:d.attributes.marginRight-j,height:d.attributes.height+d.attributes.marginTop+d.attributes.marginBottom});var l=d.elements.layers.margin.selectAll("rect").data(k);l.enter().append("rect"),l.exit().remove(),d.elements.layers.margin.selectAll("rect").attr("x",function(a){return a.x}).attr("y",function(a){return a.y}).attr("width",function(a){return a.width}).attr("height",function(a){return a.height}).style("fill",d.attributes.background),d.elements.layers.xGrid.attr("transform","translate(0, "+d.attributes.height+")"),d.elements.layers.xGrid.style("visibility",d.attributes.xgridlinesVisibility).call(e),d.elements.layers.xGrid.selectAll("path,line").style("fill",d.attributes.xgridlinesFill).style("stroke",d.attributes.xgridlinesStroke).style("shape-rendering",d.attributes.xgridlinesShapeRendering).style("opacity",d.attributes.xgridlinesOpacity),d.elements.layers.yGrid.style("visibility",d.attributes.ygridlinesVisibility).call(g),d.elements.layers.yGrid.selectAll("path,line").style("fill",d.attributes.ygridlinesFill).style("stroke",d.attributes.ygridlinesStroke).style("shape-rendering",d.attributes.ygridlinesShapeRendering).style("opacity",d.attributes.ygridlinesOpacity),d.elements.layers.xAxis.style("visibility",d.attributes.xaxisVisibility).attr("transform","translate(0,"+(b.domain()[0]<0?b(0):d.attributes.height)+")").call(c),d.elements.layers.xAxis.selectAll("path,line").style("fill",d.attributes.xaxisFill).style("stroke",d.attributes.xaxisStroke).style("shape-rendering",d.attributes.xaxisShapeRendering),d.elements.layers.xAxis.selectAll("text").style("font-family",d.attributes.xaxisFontFamily).style("font-size",d.attributes.xaxisFontSize).style("fill",d.attributes.xaxisFontColor),d.elements.xAxisText.attr("transform","translate("+d.attributes.width+", "+(d.attributes.height+d.attributes.marginBottom-10)+")").text(escape(d.attributes.xaxisLabelText)).style("font-family",d.attributes.xaxisFontFamily).style("font-size",d.attributes.xaxisFontSize).style("fill",d.attributes.xaxisFontColor),a.domain()[0]<0?d.elements.layers.yAxis.attr("transform","translate("+a(0)+",0)"):d.elements.layers.yAxis.attr("transform",null),d.elements.layers.yAxis.style("visibility",d.attributes.yaxisVisibility).call(f),d.elements.layers.yAxis.selectAll("path,line").style("fill",d.attributes.yaxisFill).style("stroke",d.attributes.yaxisStroke).style("shape-rendering",d.attributes.yaxisShapeRendering),d.elements.layers.yAxis.selectAll("text").style("font-family",d.attributes.yaxisFontFamily).style("font-size",d.attributes.yaxisFontSize).style("fill",d.attributes.yaxisFontColor),d.elements.yAxisText.attr("transform","translate("+(10-d.attributes.marginLeft)+", 0)rotate(-90)").text(cleanEscape(d.attributes.yaxisLabelText)).style("font-family",d.attributes.yaxisFontFamily).style("font-size",d.attributes.yaxisFontSize).style("fill",d.attributes.yaxisFontColor),d.elements.plotLabelText.attr("transform","translate(0,"+(12-d.attributes.marginTop)+")").style("font-size",d.attributes.plotLabelFontSize).style("fill",d.attributes.plotLabelFontColor).text(escape(d.attributes.plotLabelText));var m=d.elements.brush&&!d.elements.brush.empty()?d.elements.brush.extent():null,n=!1,o=!1;d.events.brushstart||d.events.brush||d.events.brushend?(m&&(2!==m[0].length||2!==m[1].length)&&(m=null),d.elements.brush=d3.svg.brush().x(a).y(b),m&&d.elements.brush.extent(m),d.events.brushstart&&d.elements.brush.on("brushstart",function(){d.events.brushstart(d.elements.brush)}),d.events.brush&&d.elements.brush.on("brush",function(){d.events.brush(d.elements.brush)}),d.events.brushend&&d.elements.brush.on("brushend",function(){d.events.brushend(d.elements.brush)})):d.events.xbrushstart||d.events.xbrush||d.events.xbrushend?(m&&(m[0]instanceof Array||m[1]instanceof Array)&&(m=null),d.elements.brush=d3.svg.brush().x(a),m&&d.elements.brush.extent(m),d.events.xbrushstart&&d.elements.brush.on("brushstart",function(){d.events.xbrushstart(d.elements.brush)}),d.events.xbrush&&d.elements.brush.on("brush",function(){d.events.xbrush(d.elements.brush)}),d.events.xbrushend&&d.elements.brush.on("brushend",function(){d.events.xbrushend(d.elements.brush)}),n=!0):d.events.ybrushstart||d.events.ybrush||d.events.ybrushend?(m&&(m[0]instanceof Array||m[1]instanceof Array)&&(m=null),d.elements.brush=d3.svg.brush().y(b),m&&d.elements.brush.extent(m),d.events.ybrushstart&&d.elements.brush.on("brushstart",function(){d.events.ybrushstart(d.elements.brush)}),d.events.ybrush&&d.elements.brush.on("brush",function(){d.events.ybrush(d.elements.brush)}),d.events.ybrushend&&d.elements.brush.on("brushend",function(){d.events.ybrushend(d.elements.brush)}),o=!0):d.elements.brush=null,d.elements.brush?(d.attributes.brushClearOnRedraw&&d.elements.brush.clear(),d.elements.layers.brush.call(d.elements.brush),d.elements.layers.brush.selectAll(".extent").style("stroke",d.attributes.brushStroke).style("fill",d.attributes.brushFill).style("fill-opacity",d.attributes.brushFillOpacity).style("shape-rendering",d.attributes.brushShapeRendering),n&&d.elements.layers.brush.selectAll("rect").attr("height",d.attributes.height),o&&d.elements.layers.brush.selectAll("rect").attr("width",d.attributes.width)):d.elements.layers.brush.selectAll("rect").remove(),d.elements.controller.redraw()}};for(var e in d.attributes)d[e]=ivml.generate_set_function_for_attributes(d,e);for(var e in d.events)d[e]=ivml.generate_set_function_for_events(d,e);return d};var ivml=ivml||{};ivml.visualElements=ivml.visualElements||{},ivml.visualElements.Points=function h(a,b){var h={elements:{controller:a,$timeout:b,svg_g:null},accessors:{data:[],xfunction:null,yfunction:null},attributes:{cursor:"default",radius:1,fill:"#000000",fillOpacity:1,stroke:"none",strokeOpacity:1,strokeDasharray:"none"},events:{mouseOverE:null,mouseOutE:null,clickE:null}};h.setGraphics=function(){h.elements.controller&&!h.elements.svg_g&&(h.elements.svg_g=h.elements.controller.getUnmaskedLayer().append("g"))},h.redraw=function(){if(h.elements.controller){var a=h.elements.controller.getXScale(),b=h.elements.controller.getYScale();if(a&&b&&(h.setGraphics(),h.elements.svg_g&&h.accessors.data&&h.accessors.xfunction&&h.accessors.yfunction)){var c,d=h.accessors.xfunction,e=h.accessors.yfunction;if(a.rangeBand){var f=a.rangeBand()/2;c=function(b,c){return a.domain().indexOf(d(b,c))>=0?a(d(b,c))+f:null}}else c=function(b,c){return a(d(b,c))};var g;if(b.rangeBand){var i=b.rangeBand()/2;g=function(a,c){return b.domain().indexOf(e(a,c))>=0?b(e(a,c))+i:null}}else g=function(a,c){return b(e(a,c))};var j=h.elements.svg_g.selectAll("circle").data(h.accessors.data);j.enter().append("circle").attr("cx",c).attr("cy",g).attr("fill",h.attributes.fill).attr("r",h.attributes.radius).style("cursor",h.attributes.cursor).style("fill-opacity",h.attributes.fillOpacity).style("stroke",h.attributes.stroke).style("stroke-opacity",h.attributes.strokeOpacity).style("stroke-dasharray",h.attributes.strokeDasharray),ivml.animateSelection(j.style("visibility",function(f,h){if(a.rangeBand){if(null==c(f,h))return"hidden"}else{var i=d(f,h);if(a.domain()[0]>i||i>a.domain()[1])return"hidden"}if(b.rangeBand){if(null==g(f,h))return"hidden"}else{var j=e(f);if(b.domain()[0]>j||j>b.domain()[1])return"hidden"}return"visible"})).attr("cx",c).attr("cy",g).attr("fill",h.attributes.fill).attr("r",h.attributes.radius).style("cursor",h.attributes.cursor).style("fill-opacity",h.attributes.fillOpacity).style("stroke",h.attributes.stroke).style("stroke-opacity",h.attributes.strokeOpacity).style("stroke-dasharray",h.attributes.strokeDasharray),j.exit().remove(),h.events.mouseOutE&&j.on("mouseout",function(a,b){h.events.mouseOutE(a,b,d3.select(this))}),h.events.mouseOverE&&j.on("mouseover",function(a,b){h.events.mouseOverE(a,b,d3.select(this))}),h.events.clickE&&j.on("click",function(a,b){h.events.clickE(a,b,d3.select(this))})}}};for(var c in h.accessors)h[c]=ivml.generate_set_function_for_accessors(h,c);for(var c in h.attributes)h[c]=ivml.generate_set_function_for_attributes(h,c);for(var c in h.events)h[c]=ivml.generate_set_function_for_events(h,c);return h};var ivml=ivml||{};ivml.visualElements=ivml.visualElements||{},ivml.visualElements.Rectangles=function(a,b){var c={elements:{controller:a,$timeout:b,xscale:null,yscale:null,svg_g:null,frame:null},attributes:{stroke:"blue",strokeWidth:3,strokeOpacity:1,fill:"none",fillOpacity:1,height:7,width:7,title:null,cursor:"default"},accessors:{data:[],heightFunction:null,widthFunction:null,xcenterFunction:null,ycenterFunction:null,x1Function:null,x2Function:null,y1Function:null,y2Function:null},events:{mouseOverE:null,mouseOutE:null,clickE:null}};c.setGraphics=function(){c.elements.controller&&!c.elements.svg_g&&(c.elements.svg_g=c.elements.controller.getMaskedLayer().append("g"))},c.redraw=function(){if(c.elements.controller){var a=c.elements.controller.getXScale(),b=c.elements.controller.getYScale();if(a&&b&&(c.setGraphics(),c.elements.svg_g&&c.accessors.data&&(c.accessors.xcenterFunction||c.accessors.x1Function&&c.accessors.x2Function)&&(c.accessors.ycenterFunction||c.accessors.y1Function&&c.accessors.y2Function))){var d,e,f=c.accessors.xcenterFunction,g=c.accessors.x1Function,h=c.accessors.x2Function,i=c.accessors.ycenterFunction,j=c.accessors.y1Function,k=c.accessors.y2Function,l=c.elements.svg_g.selectAll("rect").data(c.accessors.data),m=c.attributes.width,n=c.attributes.height;if(a.rangeBand){var o=a.rangeBand()/2;if(f){if("function"==typeof m)d=function(b,c){return a.domain().indexOf(f(b,c))>=0?a(f(b,c))-m(b,c)/2+o:null};else{var p=isNaN(parseFloat(m))?7:parseFloat(m);d=function(b,c){return a.domain().indexOf(f(b,c))>=0?a(f(b,c))-p/2+o:null}}e=m}else d=function(b,c){return a.domain().indexOf(g(b,c))>=0&&a.domain().indexOf(h(b,c))>=0?a(g(b,c))+o:null},e=function(b,c){return a.domain().indexOf(g(b,c))>=0&&a.domain().indexOf(h(b,c))>=0?a(h(b,c))-a(g(b,c)):null}}else if(f){if("function"==typeof m)d=function(b,c){return a(f(b,c))-m(b,c)/2};else{var p=isNaN(parseFloat(m))?7:parseFloat(m);d=function(b,c){return a(f(b,c))-p/2}}e=m}else d=function(b,c){return a(g(b,c))},e=function(b,c){return a(h(b,c))-a(g(b,c))};var q,r;if(b.rangeBand){var s=b.rangeBand()/2;if(i){if("function"==typeof n)q=function(a,c){return b.domain().indexOf(i(a,c))>=0?b(i(a,c))-n(a,c)/2+s:null};else{var t=isNaN(parseFloat(n))?7:parseFloat(n);q=function(a,c){return b.domain().indexOf(i(a,c))>=0?b(i(a,c))-t/2+s:null}}r=n}else q=function(a,c){return b.domain().indexOf(j(a,c))>=0&&b.domain().indexOf(k(a,c))>=0?b(j(a,c))+s:null},r=function(a,c){return b.domain().indexOf(j(a,c))>=0&&b.domain().indexOf(k(a,c))>=0?b(k(a,c))-b(j(a,c)):null}}else if(i){if("function"==typeof n)q=function(a,c){return b(i(a,c))-n(a,c)/2};else{var t=isNaN(parseFloat(n))?7:parseFloat(n);q=function(a,c){return b(i(a,c))-t/2}}r=n}else q=function(a,c){return b(j(a,c))},r=function(a,c){return b(k(a,c))-b(j(a,c))};l.enter().append("rect").attr("x",d).attr("y",q).attr("width",e).attr("height",r).attr("stroke",c.attributes.stroke).attr("stroke-width",c.attributes.strokeWidth).attr("stroke-opacity",c.attributes.strokeOpacity).attr("fill",c.attributes.fill).attr("fill-opacity",c.attributes.fillOpacity).style("cursor",c.attributes.cursor),ivml.animateSelection(l.style("visibility",function(a,b){return null==d(a,b)?"hidden":null==q(a,b)?"hidden":"visible"})).attr("x",d).attr("y",q).attr("width",e).attr("height",r).attr("stroke",c.attributes.stroke).attr("stroke-width",c.attributes.strokeWidth).attr("stroke-opacity",c.attributes.strokeOpacity).attr("fill",c.attributes.fill).attr("fill-opacity",c.attributes.fillOpacity).style("cursor",c.attributes.cursor),l.selectAll("title").remove(),l.append("title").text(ivml.isF(c.attributes.title)?function(a,b){return ivml.escapeNoNull(c.attributes.title(a,b))}:ivml.escapeNoNull(c.attributes.title)),l.exit().remove(),c.events.mouseOutE&&l.on("mouseout",function(a,b){c.events.mouseOutE(a,b,d3.select(this))}),c.events.mouseOverE&&l.on("mouseover",function(a,b){c.events.mouseOverE(a,b,d3.select(this))}),c.events.clickE&&l.on("click",function(a,b){c.events.clickE(a,b,d3.select(this))})}}};for(var d in c.accessors)c[d]=ivml.generate_set_function_for_accessors(c,d);for(var d in c.attributes)c[d]=ivml.generate_set_function_for_attributes(c,d);for(var d in c.events)c[d]=ivml.generate_set_function_for_events(c,d);return c};var ivml=ivml||{};ivml.visualElements=ivml.visualElements||{},ivml.visualElements.Shapes=function(a){var b=a,c={projection:null,svg_g:null,frame:null,shapesJson:null},d={fill:function(){return"gold"},stroke:function(){return"none"},stroke_width:function(){return 3},stroke_opacity:function(){return 1},fill_opacity:function(){return 1},classed:function(){return"shape"}},e={mouseOver:null,mouseOut:null,click:null},f={path_data:null},g=[];this.setFrame=function(a){a.append&&(c.frame=a,c.svg_g=c.frame.append("g"))},this.setController=function(a){b=a};var h=!1;this.redraw=function(){if(c.shapesJson&&b&&f.path_data&&(c.projection=b.getProjection(),c.svg_g&&c.projection))if(h){var a=d3.geo.path().projection(c.projection),g=c.svg_g.selectAll("path");g.attr("d",a).attr("fill",function(a,b){return d.fill(a,b)}).attr("stroke",function(a,b){return d.stroke(a,b)}).attr("fill-opacity",function(a,b){return d.fill_opacity(a,b)}).attr("stroke-opacity",function(a,b){return d.stroke_opacity(a,b)}).classed(d.classed(),!0),e.mouseOut&&g.on("mouseout",function(a,b){e.mouseOut(a,b,d3.select(this))}),e.mouseOver&&g.on("mouseover",function(a,b){e.mouseOver(a,b,d3.select(this))}),e.click&&g.on("click",function(a,b){e.click(a,b,d3.select(this))})}else{var a=d3.geo.path().projection(c.projection),g=c.svg_g.selectAll("path").data(f.path_data(c.shapesJson));g.enter().append("path").attr("d",a).attr("fill",function(a,b){return d.fill(a,b)}).attr("stroke",function(a,b){return d.stroke(a,b)}).attr("fill-opacity",function(a,b){return d.fill_opacity(a,b)}).attr("stroke-opacity",function(a,b){return d.stroke_opacity(a,b)}).classed(d.classed(),!0),g.attr("d",a).attr("fill",function(a,b){return d.fill(a,b)}).attr("stroke",function(a,b){return d.stroke(a,b)}).attr("fill-opacity",function(a,b){return d.fill_opacity(a,b)}).attr("stroke-opacity",function(a,b){return d.stroke_opacity(a,b)}).classed(d.classed(),!0),h=!0,g.exit().remove(),e.mouseOut&&g.on("mouseout",function(a,b){e.mouseOut(a,b)}),e.mouseOver&&g.on("mouseOver",function(a,b){e.mouseOut(a,b)}),e.click&&g.on("click",function(a,b){e.click(a,b)})}},this.dat=function(a){return arguments.length?(g=a,this.redraw(),this):g},this.generate_set_function_for_accessors=function(a,b){return function(c){c&&(a[b]="function"==typeof c?c:function(a){return a[c]},this.redraw())}},this.generate_set_function_redraw=function(a,b){return function(c){c&&(a[b]="function"==typeof c?c:function(){return c},this.redraw())}},this.shapesJson=function(a){c.shapesJson=a,this.redraw()};for(i in f)this[i]=this.generate_set_function_for_accessors(f,i);for(i in d)this[i]=this.generate_set_function_redraw(d,i);for(i in e)this[i]=this.generate_set_function_redraw(e,i)};var ivml=ivml||{};ivml.visualElements=ivml.visualElements||{},ivml.visualElements.Texts=function j(a,b){var j={elements:{controller:a,$timeout:b,svg_g:null},attributes:{fontFamily:"sans-serif",textAnchor:"middle",dominantBaseline:"auto",fontSize:"10px",makeVertical:!1,cursor:"default",yadjust:0,xadjust:0,fill:"#000000",maxWidth:null,truncateEnding:"..."},accessors:{data:null,xfunction:null,yfunction:null,textFunction:null},events:{mouseOverE:null,mouseOutE:null,clickE:null}};j.setGraphics=function(){j.elements.controller&&!j.elements.svg_g&&(j.elements.svg_g=j.elements.controller.getUnmaskedLayer().append("g"))},j.redraw=function(){if(j.elements.controller){var a=j.elements.controller.getXScale(),b=j.elements.controller.getYScale();if(a&&b&&(j.setGraphics(),j.elements.svg_g&&j.accessors.data&&j.accessors.xfunction&&j.accessors.yfunction)){var c,d=j.accessors.xfunction,e=j.accessors.yfunction,f=j.attributes.xadjust||0,g=j.attributes.yadjust||0;if(a.rangeBand){var h=a.rangeBand()/2;c=ivml.isF(f)?function(b,c){return a.domain().indexOf(d(b,c))>=0?a(d(b,c))+f(b,c)+h:null}:function(b,c){return a.domain().indexOf(d(b,c))>=0?a(d(b,c))+f+h:null}}else c=ivml.isF(f)?function(b,c){return a(d(b,c))+f(b,c)}:function(b,c){return a(d(b,c))+f};var i;if(b.rangeBand){var k=b.rangeBand()/2;i=ivml.isF(g)?function(a,c){return b.domain().indexOf(e(a,c))>=0?b(e(a,c))+g(a,c)+k:null}:function(a,c){return b.domain().indexOf(e(a,c))>=0?b(e(a,c))+g+k:null}}else i=ivml.isF(g)?function(a,c){return b(e(a,c))+g(a,c)}:function(a,c){return b(e(a,c))+g};var l=j.elements.svg_g.selectAll("text").data(j.accessors.data),m=j.attributes.makeVertical?function(a,b){var d=!0;if(ivml.isF(j.attributes.makeVertical)&&(d=j.attributes.makeVertical(a,b)),d){var e=c(a,b),f=i(a,b);return"rotate(-90 "+e+","+f+")"}return null}:null,n=j.attributes.maxWidth?function(a,b){for(var c=ivml.isF(j.attributes.maxWidth)?j.attributes.maxWidth(a,b):j.attributes.maxWidth,d=j.attributes.truncateEnding?j.attributes.truncateEnding:"",e=j.accessors.textFunction(a,b),f=e;e.length&&ivml.getTextWidthInPixels(f,j.attributes.fontFamily,j.attributes.fontSize)>c;)e=e.slice(0,-1),f=e+d;return f}:j.accessors.textFunction;l.enter().append("text").attr("x",c).attr("y",i).attr("text-anchor",j.attributes.textAnchor).style("dominant-baseline",j.attributes.dominantBaseline).attr("font-family",j.attributes.fontFamily).attr("font-size",j.attributes.fontSize).attr("fill",j.attributes.fill).style("cursor",j.attributes.cursor).attr("transform",m).text(n),ivml.animateSelection(l.style("visibility",function(a,b){return null==c(a,b)?"hidden":null==i(a,b)?"hidden":"visible"})).attr("x",c).attr("y",i).attr("text-anchor",j.attributes.textAnchor).style("dominant-baseline",j.attributes.dominantBaseline).attr("font-family",j.attributes.fontFamily).attr("font-size",j.attributes.fontSize).attr("fill",j.attributes.fill).style("cursor",j.attributes.cursor).attr("transform",m).text(n),l.exit().remove(),j.events.mouseOutE&&l.on("mouseout",function(a,b){j.events.mouseOutE(a,b,d3.select(this))}),j.events.mouseOverE&&l.on("mouseover",function(a,b){j.events.mouseOverE(a,b,d3.select(this))}),j.events.clickE&&l.on("click",function(a,b){j.events.clickE(a,b,d3.select(this))})}}},j.setController=function(b){a=b};for(var c in j.accessors)j[c]=ivml.generate_set_function_for_accessors(j,c);for(var c in j.attributes)j[c]=ivml.generate_set_function_for_attributes(j,c);for(var c in j.events)j[c]=ivml.generate_set_function_for_events(j,c);return j};